<!DOCTYPE html>
<html>
<head>
    <title>Edit Users</title>
</head>
<body>
    <h2>Edit Users</h2>
    {% if error %}
        <p style="color: red;">{{ error }}</p>
    {% endif %}
    <form method="post">
        {% csrf_token %}
        <input type="hidden" name="user_id" id="id_user_id" value="">
        <label for="id_username">Username:</label>
        <input type="text" name="username" id="id_username" required><br>
        <label for="id_first_name">First Name:</label>
        <input type="text" name="first_name" id="id_first_name"><br>
        <label for="id_last_name">Last Name:</label>
        <input type="text" name="last_name" id="id_last_name"><br>
        <label for="id_email">Email:</label>
        <input type="email" name="email" id="id_email"><br>
        <label for="id_password">Password:</label>
        <input type="password" name="password" id="id_password" required><br>
        <label for="id_role">Role:</label>
        <select name="role" id="id_role" required>
            <option value="admin">Admin</option>
            <option value="staff">Staff</option>
            <option value="user">User</option>
        </select><br>
        <button type="submit" id="submit_button">Create User</button>
    </form>
    <h3>Existing Users</h3>
    <table border="1">
        <thead>
            <tr>
                <th>ID</th>
                <th>Username</th>
                <th>First Name</th>
                <th>Last Name</th>
                <th>Email</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for user in users %}
            <tr>
                <td>{{ user.id }}</td>
                <td>{{ user.username }}</td>
                <td>{{ user.first_name }}</td>
                <td>{{ user.last_name }}</td>
                <td>{{ user.email }}</td>
                <td>
                    <button onclick="editUser({{ user.id }}, '{{ user.username }}', '{{ user.first_name }}', '{{ user.last_name }}', '{{ user.email }}')">Edit</button>
                </td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="6">No users found.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    <a href="{% url 'main_menu' %}">Back to Main Menu</a>
<script>
function editUser(userId, username, firstName, lastName, email) {
    document.getElementById('id_user_id').value = userId;
    document.getElementById('id_username').value = username;
    document.getElementById('id_first_name').value = firstName;
    document.getElementById('id_last_name').value = lastName;
    document.getElementById('id_email').value = email;
    document.getElementById('id_password').value = '';
    document.getElementById('submit_button').textContent = 'Update User';
}
</script>
</body>
</html>
